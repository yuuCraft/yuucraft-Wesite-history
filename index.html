<!doctype html>
<html lang="ja" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Web Benchmark</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&amp;family=Inter:wght@400;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }
    
    .mono {
      font-family: 'JetBrains Mono', monospace;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
    }
    
    .card-glass {
      background: rgba(15, 23, 42, 0.6);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(148, 163, 184, 0.1);
    }
    
    .metric-glow {
      text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
    }
    
    @keyframes scan {
      0%, 100% { transform: translateY(-100%); }
      50% { transform: translateY(100%); }
    }
    
    .scan-line {
      animation: scan 3s ease-in-out infinite;
    }
    
    .progress-shimmer {
      background: linear-gradient(90deg, 
        rgba(59, 130, 246, 0.1) 0%,
        rgba(59, 130, 246, 0.3) 50%,
        rgba(59, 130, 246, 0.1) 100%);
      background-size: 200% 100%;
      animation: shimmer 2s ease-in-out infinite;
    }
    
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    canvas {
      image-rendering: pixelated;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full overflow-auto gradient-bg">
   <div class="min-h-full w-full p-4 md:p-8">
    <div class="max-w-7xl mx-auto"><!-- Header -->
     <div class="text-center mb-8">
      <h1 id="mainTitle" class="text-5xl md:text-7xl font-black text-white mb-3 metric-glow tracking-tight">ADVANCED BENCHMARK</h1>
      <p id="subtitle" class="text-lg md:text-xl text-slate-300 mono">Web Performance Analysis Suite</p>
     </div><!-- Start Screen -->
     <div id="startScreen" class="text-center">
      <div class="card-glass rounded-3xl p-8 md:p-12 mb-6 max-w-2xl mx-auto">
       <p class="text-slate-300 mb-8 text-base md:text-lg leading-relaxed">ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ï¼š<br><span class="text-blue-400">CPUæ¼”ç®— / GPUå‡¦ç† / ãƒ¡ãƒ¢ãƒªç®¡ç† / FPSè¨ˆæ¸¬ / ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€Ÿåº¦ / Web Audio / WebGL / DOMæ“ä½œ</span></p><button id="startButton" class="bg-blue-600 text-white px-10 py-5 rounded-xl text-xl font-bold hover:bg-blue-500 transition-all transform hover:scale-105 shadow-2xl"> ãƒ•ãƒ«ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯é–‹å§‹ </button>
       <p class="mt-6 text-slate-400 text-sm">â€» æ¸¬å®šã«ã¯ç´„20-30ç§’ã‹ã‹ã‚Šã¾ã™</p>
      </div>
     </div><!-- Testing Screen -->
     <div id="testingScreen" class="hidden">
      <div class="card-glass rounded-3xl p-6 md:p-8 mb-6">
       <div class="flex items-center justify-between mb-4">
        <h2 id="currentTest" class="text-2xl md:text-3xl font-bold text-white">åˆæœŸåŒ–ä¸­...</h2><span id="testProgress" class="text-lg md:text-xl text-blue-400 mono font-bold">0/8</span>
       </div>
       <div class="bg-slate-800 rounded-full h-3 overflow-hidden mb-4">
        <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-cyan-400 h-full rounded-full transition-all duration-500"></div>
       </div>
       <p id="testStatus" class="text-slate-300 text-sm md:text-base mono">æº–å‚™ä¸­...</p>
       <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-3">
        <div class="text-center p-3 bg-slate-800 rounded-lg">
         <div id="liveMetric1" class="text-2xl font-bold text-blue-400 mono">
          -
         </div>
         <div class="text-xs text-slate-400 mt-1">
          ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 
         </div>
        </div>
        <div class="text-center p-3 bg-slate-800 rounded-lg">
         <div id="liveMetric2" class="text-2xl font-bold text-cyan-400 mono">
          -
         </div>
         <div class="text-xs text-slate-400 mt-1">
          å‡¦ç†é€Ÿåº¦
         </div>
        </div>
        <div class="text-center p-3 bg-slate-800 rounded-lg">
         <div id="liveMetric3" class="text-2xl font-bold text-purple-400 mono">
          -
         </div>
         <div class="text-xs text-slate-400 mt-1">
          FPS
         </div>
        </div>
        <div class="text-center p-3 bg-slate-800 rounded-lg">
         <div id="liveMetric4" class="text-2xl font-bold text-green-400 mono">
          -
         </div>
         <div class="text-xs text-slate-400 mt-1">
          ãƒ¡ãƒ¢ãƒª
         </div>
        </div>
       </div>
      </div>
      <div class="card-glass rounded-2xl p-4 overflow-hidden relative">
       <canvas id="testCanvas" class="w-full rounded-lg" width="1200" height="600"></canvas>
       <div class="absolute inset-0 pointer-events-none overflow-hidden">
        <div class="scan-line absolute w-full h-1 bg-gradient-to-r from-transparent via-blue-400 to-transparent opacity-30"></div>
       </div>
      </div>
     </div><!-- Results Screen -->
     <div id="resultsScreen" class="hidden">
      <div class="card-glass rounded-3xl p-6 md:p-8 mb-6">
       <h2 class="text-3xl md:text-4xl font-black text-white mb-8 text-center">è©³ç´°æ¸¬å®šçµæœ</h2>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"><!-- CPU Score -->
        <div class="bg-slate-800 rounded-xl p-5">
         <div class="flex justify-between items-start mb-3">
          <div>
           <div class="text-sm text-slate-400 mb-1">
            CPUæ¼”ç®—æ€§èƒ½
           </div>
           <div id="cpuScore" class="text-4xl font-black text-blue-400 mono">
            0
           </div>
          </div>
          <div class="text-right">
           <div class="text-xs text-slate-500">
            ops/sec
           </div>
           <div id="cpuDetail" class="text-sm text-slate-300 mono mt-1">
            -
           </div>
          </div>
         </div>
         <div class="bg-slate-700 rounded-full h-2 overflow-hidden">
          <div id="cpuBar" class="bg-gradient-to-r from-blue-500 to-blue-400 h-full rounded-full transition-all duration-1000"></div>
         </div>
        </div><!-- GPU Score -->
        <div class="bg-slate-800 rounded-xl p-5">
         <div class="flex justify-between items-start mb-3">
          <div>
           <div class="text-sm text-slate-400 mb-1">
            GPUå‡¦ç†èƒ½åŠ›
           </div>
           <div id="gpuScore" class="text-4xl font-black text-cyan-400 mono">
            0
           </div>
          </div>
          <div class="text-right">
           <div class="text-xs text-slate-500">
            polygons/sec
           </div>
           <div id="gpuDetail" class="text-sm text-slate-300 mono mt-1">
            -
           </div>
          </div>
         </div>
         <div class="bg-slate-700 rounded-full h-2 overflow-hidden">
          <div id="gpuBar" class="bg-gradient-to-r from-cyan-500 to-cyan-400 h-full rounded-full transition-all duration-1000"></div>
         </div>
        </div><!-- FPS Score -->
        <div class="bg-slate-800 rounded-xl p-5">
         <div class="flex justify-between items-start mb-3">
          <div>
           <div class="text-sm text-slate-400 mb-1">
            ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°FPS
           </div>
           <div id="fpsScore" class="text-4xl font-black text-purple-400 mono">
            0
           </div>
          </div>
          <div class="text-right">
           <div class="text-xs text-slate-500">
            frames/sec
           </div>
           <div id="fpsDetail" class="text-sm text-slate-300 mono mt-1">
            -
           </div>
          </div>
         </div>
         <div class="bg-slate-700 rounded-full h-2 overflow-hidden">
          <div id="fpsBar" class="bg-gradient-to-r from-purple-500 to-purple-400 h-full rounded-full transition-all duration-1000"></div>
         </div>
        </div><!-- Memory Score -->
        <div class="bg-slate-800 rounded-xl p-5">
         <div class="flex justify-between items-start mb-3">
          <div>
           <div class="text-sm text-slate-400 mb-1">
            ãƒ¡ãƒ¢ãƒªç®¡ç†
           </div>
           <div id="memoryScore" class="text-4xl font-black text-green-400 mono">
            0
           </div>
          </div>
          <div class="text-right">
           <div class="text-xs text-slate-500">
            MB/sec
           </div>
           <div id="memoryDetail" class="text-sm text-slate-300 mono mt-1">
            -
           </div>
          </div>
         </div>
         <div class="bg-slate-700 rounded-full h-2 overflow-hidden">
          <div id="memoryBar" class="bg-gradient-to-r from-green-500 to-green-400 h-full rounded-full transition-all duration-1000"></div>
         </div>
        </div><!-- Network Score -->
        <div class="bg-slate-800 rounded-xl p-5">
         <div class="flex justify-between items-start mb-3">
          <div>
           <div class="text-sm text-slate-400 mb-1">
            ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€Ÿåº¦
           </div>
           <div id="networkScore" class="text-4xl font-black text-yellow-400 mono">
            0
           </div>
          </div>
          <div class="text-right">
           <div class="text-xs text-slate-500">
            ms latency
           </div>
           <div id="networkDetail" class="text-sm text-slate-300 mono mt-1">
            -
           </div>
          </div>
         </div>
         <div class="bg-slate-700 rounded-full h-2 overflow-hidden">
          <div id="networkBar" class="bg-gradient-to-r from-yellow-500 to-yellow-400 h-full rounded-full transition-all duration-1000"></div>
         </div>
        </div><!-- Audio Score -->
        <div class="bg-slate-800 rounded-xl p-5">
         <div class="flex justify-between items-start mb-3">
          <div>
           <div class="text-sm text-slate-400 mb-1">
            Audioå‡¦ç†
           </div>
           <div id="audioScore" class="text-4xl font-black text-pink-400 mono">
            0
           </div>
          </div>
          <div class="text-right">
           <div class="text-xs text-slate-500">
            samples/sec
           </div>
           <div id="audioDetail" class="text-sm text-slate-300 mono mt-1">
            -
           </div>
          </div>
         </div>
         <div class="bg-slate-700 rounded-full h-2 overflow-hidden">
          <div id="audioBar" class="bg-gradient-to-r from-pink-500 to-pink-400 h-full rounded-full transition-all duration-1000"></div>
         </div>
        </div><!-- WebGL Score -->
        <div class="bg-slate-800 rounded-xl p-5">
         <div class="flex justify-between items-start mb-3">
          <div>
           <div class="text-sm text-slate-400 mb-1">
            WebGLæ€§èƒ½
           </div>
           <div id="webglScore" class="text-4xl font-black text-orange-400 mono">
            0
           </div>
          </div>
          <div class="text-right">
           <div class="text-xs text-slate-500">
            draw calls/sec
           </div>
           <div id="webglDetail" class="text-sm text-slate-300 mono mt-1">
            -
           </div>
          </div>
         </div>
         <div class="bg-slate-700 rounded-full h-2 overflow-hidden">
          <div id="webglBar" class="bg-gradient-to-r from-orange-500 to-orange-400 h-full rounded-full transition-all duration-1000"></div>
         </div>
        </div><!-- DOM Score -->
        <div class="bg-slate-800 rounded-xl p-5">
         <div class="flex justify-between items-start mb-3">
          <div>
           <div class="text-sm text-slate-400 mb-1">
            DOMæ“ä½œé€Ÿåº¦
           </div>
           <div id="domScore" class="text-4xl font-black text-red-400 mono">
            0
           </div>
          </div>
          <div class="text-right">
           <div class="text-xs text-slate-500">
            ops/sec
           </div>
           <div id="domDetail" class="text-sm text-slate-300 mono mt-1">
            -
           </div>
          </div>
         </div>
         <div class="bg-slate-700 rounded-full h-2 overflow-hidden">
          <div id="domBar" class="bg-gradient-to-r from-red-500 to-red-400 h-full rounded-full transition-all duration-1000"></div>
         </div>
        </div>
       </div><!-- Overall Score -->
       <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-center">
        <div class="text-slate-200 text-lg mb-2 font-semibold">
         ç·åˆã‚¹ã‚³ã‚¢
        </div>
        <div id="totalScore" class="text-7xl font-black text-white metric-glow mono">
         0
        </div>
        <div id="totalRating" class="text-xl text-slate-200 mt-3 font-semibold">
         è©•ä¾¡ä¸­...
        </div>
       </div>
      </div><button id="retestButton" class="w-full bg-blue-600 text-white px-8 py-5 rounded-xl text-xl font-bold hover:bg-blue-500 transition-all transform hover:scale-105 shadow-2xl"> å†æ¸¬å®š </button>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      background_color: '#0f172a',
      text_color: '#ffffff',
      primary_action_color: '#3b82f6',
      secondary_action_color: '#1e293b',
      accent_color: '#06b6d4',
      font_family: 'Inter',
      font_size: 16,
      main_title: 'ADVANCED BENCHMARK',
      subtitle: 'Web Performance Analysis Suite',
      button_text: 'ãƒ•ãƒ«ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯é–‹å§‹'
    };

    const results = {
      cpu: 0, cpuDetail: '',
      gpu: 0, gpuDetail: '',
      fps: 0, fpsDetail: '',
      memory: 0, memoryDetail: '',
      network: 0, networkDetail: '',
      audio: 0, audioDetail: '',
      webgl: 0, webglDetail: '',
      dom: 0, domDetail: '',
      total: 0
    };

    async function onConfigChange(config) {
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const fontFamily = `${customFont}, sans-serif`;

      document.body.style.fontFamily = fontFamily;
      document.getElementById('mainTitle').style.fontSize = `${baseSize * 4.375}px`;
      document.getElementById('mainTitle').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('subtitle').style.fontSize = `${baseSize * 1.25}px`;
      document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
      document.getElementById('startButton').textContent = config.button_text || defaultConfig.button_text;
      
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      document.getElementById('startButton').style.backgroundColor = primaryColor;
      document.getElementById('retestButton').style.backgroundColor = primaryColor;
    }

    // CPU Test - è¤‡é›‘ãªæ•°å­¦æ¼”ç®—
    async function testCPU() {
      updateTestUI('CPUæ¼”ç®—ãƒ†ã‚¹ãƒˆ', 'è¤‡é›‘ãªæ•°å€¤è¨ˆç®—ã‚’å®Ÿè¡Œä¸­...', 1, 8);
      
      const iterations = 8000000;
      const start = performance.now();
      
      let result = 0;
      for (let i = 0; i < iterations; i++) {
        result += Math.sqrt(i) * Math.sin(i / 1000) * Math.cos(i / 500) * Math.tan(i / 2000);
        result = result % 1000000;
        
        if (i % 200000 === 0) {
          document.getElementById('liveMetric1').textContent = Math.floor(i / 1000) + 'K';
          await new Promise(resolve => setTimeout(resolve, 0));
        }
      }
      
      const end = performance.now();
      const time = end - start;
      const opsPerSec = (iterations / time * 1000).toFixed(2);
      
      results.cpu = parseFloat(opsPerSec);
      results.cpuDetail = `${time.toFixed(2)}ms`;
      
      return results.cpu;
    }

    // GPU Test - Canvas 2Dè¤‡é›‘ãªæç”»
    async function testGPU() {
      updateTestUI('GPUå‡¦ç†ãƒ†ã‚¹ãƒˆ', 'Canvas2Dãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ€§èƒ½ã‚’æ¸¬å®šä¸­...', 2, 8);
      
      const canvas = document.getElementById('testCanvas');
      const ctx = canvas.getContext('2d');
      const particles = 500;
      const frames = 120;
      const start = performance.now();
      
      for (let frame = 0; frame < frames; frame++) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        for (let i = 0; i < particles; i++) {
          const x = (Math.sin(frame * 0.05 + i) * 300) + canvas.width / 2;
          const y = (Math.cos(frame * 0.03 + i * 0.5) * 200) + canvas.height / 2;
          const radius = Math.sin(frame * 0.1 + i) * 10 + 15;
          
          ctx.beginPath();
          ctx.arc(x, y, radius, 0, Math.PI * 2);
          const gradient = ctx.createRadialGradient(x, y, 0, x, y, radius);
          gradient.addColorStop(0, `hsla(${(frame * 3 + i * 2) % 360}, 70%, 60%, 0.8)`);
          gradient.addColorStop(1, `hsla(${(frame * 3 + i * 2) % 360}, 70%, 40%, 0.2)`);
          ctx.fillStyle = gradient;
          ctx.fill();
        }
        
        if (frame % 10 === 0) {
          document.getElementById('liveMetric2').textContent = frame + 'f';
          await new Promise(resolve => setTimeout(resolve, 0));
        }
      }
      
      const end = performance.now();
      const time = end - start;
      const polygonsPerSec = ((particles * frames) / time * 1000).toFixed(2);
      
      results.gpu = parseFloat(polygonsPerSec);
      results.gpuDetail = `${time.toFixed(2)}ms`;
      
      return results.gpu;
    }

    // FPS Test - requestAnimationFrameç²¾å¯†æ¸¬å®š
    async function testFPS() {
      updateTestUI('FPSãƒ†ã‚¹ãƒˆ', 'ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆã‚’ç²¾å¯†æ¸¬å®šä¸­...', 3, 8);
      
      const canvas = document.getElementById('testCanvas');
      const ctx = canvas.getContext('2d');
      const duration = 2000;
      const frameTimestamps = [];
      
      return new Promise((resolve) => {
        const startTime = performance.now();
        let lastTime = startTime;
        let frameCount = 0;
        
        function animate() {
          const currentTime = performance.now();
          const deltaTime = currentTime - lastTime;
          frameTimestamps.push(deltaTime);
          lastTime = currentTime;
          frameCount++;
          
          // è² è·ã‚’ã‹ã‘ã‚‹æç”»
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          for (let i = 0; i < 100; i++) {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 60%)`;
            ctx.fillRect(x, y, 20, 20);
          }
          
          if (frameCount % 10 === 0) {
            document.getElementById('liveMetric3').textContent = frameCount;
          }
          
          if (currentTime - startTime < duration) {
            requestAnimationFrame(animate);
          } else {
            const avgFrameTime = frameTimestamps.reduce((a, b) => a + b, 0) / frameTimestamps.length;
            const fps = 1000 / avgFrameTime;
            const minFrameTime = Math.min(...frameTimestamps);
            const maxFps = 1000 / minFrameTime;
            
            results.fps = parseFloat(fps.toFixed(3));
            results.fpsDetail = `max ${maxFps.toFixed(1)} fps`;
            
            resolve(results.fps);
          }
        }
        
        requestAnimationFrame(animate);
      });
    }

    // Memory Test - å¤§è¦æ¨¡é…åˆ—æ“ä½œ
    async function testMemory() {
      updateTestUI('ãƒ¡ãƒ¢ãƒªãƒ†ã‚¹ãƒˆ', 'ãƒ¡ãƒ¢ãƒªã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨GCæ€§èƒ½ã‚’æ¸¬å®šä¸­...', 4, 8);
      
      const iterations = 2000;
      const arraySize = 50000;
      const start = performance.now();
      let totalBytes = 0;
      
      for (let i = 0; i < iterations; i++) {
        const arr = new Float64Array(arraySize);
        for (let j = 0; j < arraySize; j++) {
          arr[j] = Math.random() * 1000;
        }
        arr.sort();
        const sum = arr.reduce((a, b) => a + b, 0);
        totalBytes += arr.byteLength;
        
        if (i % 100 === 0) {
          document.getElementById('liveMetric4').textContent = Math.floor(totalBytes / 1024 / 1024) + 'MB';
          await new Promise(resolve => setTimeout(resolve, 0));
        }
      }
      
      const end = performance.now();
      const time = end - start;
      const mbPerSec = (totalBytes / 1024 / 1024 / time * 1000).toFixed(2);
      
      results.memory = parseFloat(mbPerSec);
      results.memoryDetail = `${(totalBytes / 1024 / 1024).toFixed(0)}MB processed`;
      
      return results.memory;
    }

    // Network Test - Fetch APIãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼æ¸¬å®š
    async function testNetwork() {
      updateTestUI('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆ', 'HTTPé€šä¿¡é€Ÿåº¦ã‚’æ¸¬å®šä¸­...', 5, 8);
      
      const tests = 5;
      const latencies = [];
      
      for (let i = 0; i < tests; i++) {
        const start = performance.now();
        try {
          // Canva CDNã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆå°ã•ã„ãƒªã‚½ãƒ¼ã‚¹ï¼‰
          await fetch('https://cdn.tailwindcss.com/3.3.0/tailwind.min.css', { 
            method: 'HEAD',
            cache: 'no-store'
          });
          const end = performance.now();
          latencies.push(end - start);
        } catch (e) {
          latencies.push(999);
        }
        
        document.getElementById('liveMetric1').textContent = `${i + 1}/${tests}`;
        await new Promise(resolve => setTimeout(resolve, 100));
      }
      
      const avgLatency = latencies.reduce((a, b) => a + b, 0) / latencies.length;
      const minLatency = Math.min(...latencies);
      
      // ã‚¹ã‚³ã‚¢ã¯ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼ã»ã©é«˜ã„ï¼ˆé€†æ•°ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
      const score = (1000 / avgLatency * 100).toFixed(2);
      
      results.network = parseFloat(avgLatency.toFixed(3));
      results.networkDetail = `min ${minLatency.toFixed(1)}ms`;
      
      return parseFloat(score);
    }

    // Audio Test - Web Audio APIå‡¦ç†æ€§èƒ½
    async function testAudio() {
      updateTestUI('Audioãƒ†ã‚¹ãƒˆ', 'Web Audio APIå‡¦ç†æ€§èƒ½ã‚’æ¸¬å®šä¸­...', 6, 8);
      
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      if (!AudioContext) {
        results.audio = 0;
        results.audioDetail = 'Not supported';
        return 0;
      }
      
      const audioCtx = new AudioContext();
      const iterations = 10000;
      const start = performance.now();
      
      for (let i = 0; i < iterations; i++) {
        const oscillator = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        oscillator.frequency.value = 440 + (i % 1000);
        gainNode.gain.value = 0;
        oscillator.start();
        oscillator.stop(audioCtx.currentTime + 0.001);
        
        if (i % 500 === 0) {
          document.getElementById('liveMetric2').textContent = Math.floor(i / 100) + '%';
          await new Promise(resolve => setTimeout(resolve, 0));
        }
      }
      
      const end = performance.now();
      const time = end - start;
      const samplesPerSec = (iterations / time * 1000).toFixed(2);
      
      audioCtx.close();
      
      results.audio = parseFloat(samplesPerSec);
      results.audioDetail = `${time.toFixed(2)}ms`;
      
      return results.audio;
    }

    // WebGL Test - 3Dæç”»æ€§èƒ½
    async function testWebGL() {
      updateTestUI('WebGLãƒ†ã‚¹ãƒˆ', 'WebGL 3Dæç”»æ€§èƒ½ã‚’æ¸¬å®šä¸­...', 7, 8);
      
      const canvas = document.getElementById('testCanvas');
      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      
      if (!gl) {
        results.webgl = 0;
        results.webglDetail = 'Not supported';
        return 0;
      }
      
      // ã‚·ãƒ³ãƒ—ãƒ«ãªã‚·ã‚§ãƒ¼ãƒ€ãƒ¼
      const vsSource = `
        attribute vec4 aPosition;
        void main() {
          gl_Position = aPosition;
        }
      `;
      
      const fsSource = `
        precision mediump float;
        void main() {
          gl_FragColor = vec4(1.0, 0.5, 0.2, 1.0);
        }
      `;
      
      function createShader(gl, type, source) {
        const shader = gl.createShader(type);
        gl.shaderSource(shader, source);
        gl.compileShader(shader);
        return shader;
      }
      
      const vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
      const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsSource);
      
      const program = gl.createProgram();
      gl.attachShader(program, vertexShader);
      gl.attachShader(program, fragmentShader);
      gl.linkProgram(program);
      gl.useProgram(program);
      
      const positionBuffer = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
      
      const drawCalls = 50000;
      const start = performance.now();
      
      for (let i = 0; i < drawCalls; i++) {
        const x = (Math.random() - 0.5) * 2;
        const y = (Math.random() - 0.5) * 2;
        const size = Math.random() * 0.1;
        
        const positions = [
          x, y,
          x + size, y,
          x, y + size,
        ];
        
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);
        
        const positionLocation = gl.getAttribLocation(program, 'aPosition');
        gl.enableVertexAttribArray(positionLocation);
        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
        
        gl.drawArrays(gl.TRIANGLES, 0, 3);
        
        if (i % 2000 === 0) {
          document.getElementById('liveMetric3').textContent = Math.floor(i / 500) + '%';
          await new Promise(resolve => setTimeout(resolve, 0));
        }
      }
      
      const end = performance.now();
      const time = end - start;
      const drawCallsPerSec = (drawCalls / time * 1000).toFixed(2);
      
      results.webgl = parseFloat(drawCallsPerSec);
      results.webglDetail = `${time.toFixed(2)}ms`;
      
      return results.webgl;
    }

    // DOM Test - DOMæ“ä½œæ€§èƒ½
    async function testDOM() {
      updateTestUI('DOMãƒ†ã‚¹ãƒˆ', 'DOMæ“ä½œã¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ€§èƒ½ã‚’æ¸¬å®šä¸­...', 8, 8);
      
      const container = document.createElement('div');
      container.style.position = 'absolute';
      container.style.left = '-9999px';
      document.body.appendChild(container);
      
      const iterations = 5000;
      const start = performance.now();
      
      for (let i = 0; i < iterations; i++) {
        const div = document.createElement('div');
        div.className = 'test-element';
        div.textContent = `Element ${i}`;
        div.style.width = `${100 + i % 200}px`;
        div.style.height = `${50 + i % 100}px`;
        div.style.backgroundColor = `hsl(${i % 360}, 70%, 60%)`;
        container.appendChild(div);
        
        if (i % 500 === 0) {
          const computed = window.getComputedStyle(div);
          const width = computed.width;
        }
        
        if (i % 200 === 0) {
          document.getElementById('liveMetric4').textContent = Math.floor(i / 50) + '%';
          await new Promise(resolve => setTimeout(resolve, 0));
        }
      }
      
      container.innerHTML = '';
      
      for (let i = 0; i < iterations; i++) {
        const div = document.createElement('div');
        container.appendChild(div);
        container.removeChild(div);
      }
      
      const end = performance.now();
      document.body.removeChild(container);
      
      const time = end - start;
      const opsPerSec = (iterations * 2 / time * 1000).toFixed(2);
      
      results.dom = parseFloat(opsPerSec);
      results.domDetail = `${time.toFixed(2)}ms`;
      
      return results.dom;
    }

    function updateTestUI(testName, status, current, total) {
      document.getElementById('currentTest').textContent = testName;
      document.getElementById('testStatus').textContent = status;
      document.getElementById('testProgress').textContent = `${current}/${total}`;
      document.getElementById('progressBar').style.width = `${(current / total) * 100}%`;
    }

    async function runFullBenchmark() {
      document.getElementById('startScreen').classList.add('hidden');
      document.getElementById('testingScreen').classList.remove('hidden');
      
      await testCPU();
      await new Promise(resolve => setTimeout(resolve, 300));
      
      await testGPU();
      await new Promise(resolve => setTimeout(resolve, 300));
      
      await testFPS();
      await new Promise(resolve => setTimeout(resolve, 300));
      
      await testMemory();
      await new Promise(resolve => setTimeout(resolve, 300));
      
      await testNetwork();
      await new Promise(resolve => setTimeout(resolve, 300));
      
      await testAudio();
      await new Promise(resolve => setTimeout(resolve, 300));
      
      await testWebGL();
      await new Promise(resolve => setTimeout(resolve, 300));
      
      await testDOM();
      
      calculateTotalScore();
      displayResults();
    }

    function calculateTotalScore() {
      // æ­£è¦åŒ–ã¨ã‚¦ã‚§ã‚¤ãƒˆä»˜ã‘
      const cpuNorm = Math.min(results.cpu / 50000, 1) * 1000;
      const gpuNorm = Math.min(results.gpu / 300000, 1) * 1000;
      const fpsNorm = Math.min(results.fps / 60, 1) * 1000;
      const memoryNorm = Math.min(results.memory / 500, 1) * 1000;
      const networkNorm = Math.min((1000 / results.network) * 10, 1) * 1000;
      const audioNorm = Math.min(results.audio / 30000, 1) * 1000;
      const webglNorm = Math.min(results.webgl / 100000, 1) * 1000;
      const domNorm = Math.min(results.dom / 30000, 1) * 1000;
      
      results.total = (
        cpuNorm * 0.15 +
        gpuNorm * 0.15 +
        fpsNorm * 0.15 +
        memoryNorm * 0.15 +
        networkNorm * 0.10 +
        audioNorm * 0.10 +
        webglNorm * 0.10 +
        domNorm * 0.10
      );
    }

    function displayResults() {
      document.getElementById('testingScreen').classList.add('hidden');
      document.getElementById('resultsScreen').classList.remove('hidden');
      
      const maxScore = 10000;
      
      setTimeout(() => {
        document.getElementById('cpuScore').textContent = results.cpu.toLocaleString();
        document.getElementById('cpuDetail').textContent = results.cpuDetail;
        document.getElementById('cpuBar').style.width = `${Math.min((results.cpu / 50000) * 100, 100)}%`;
      }, 100);
      
      setTimeout(() => {
        document.getElementById('gpuScore').textContent = results.gpu.toLocaleString();
        document.getElementById('gpuDetail').textContent = results.gpuDetail;
        document.getElementById('gpuBar').style.width = `${Math.min((results.gpu / 300000) * 100, 100)}%`;
      }, 200);
      
      setTimeout(() => {
        document.getElementById('fpsScore').textContent = results.fps.toFixed(3);
        document.getElementById('fpsDetail').textContent = results.fpsDetail;
        document.getElementById('fpsBar').style.width = `${Math.min((results.fps / 60) * 100, 100)}%`;
      }, 300);
      
      setTimeout(() => {
        document.getElementById('memoryScore').textContent = results.memory.toLocaleString();
        document.getElementById('memoryDetail').textContent = results.memoryDetail;
        document.getElementById('memoryBar').style.width = `${Math.min((results.memory / 500) * 100, 100)}%`;
      }, 400);
      
      setTimeout(() => {
        document.getElementById('networkScore').textContent = results.network.toFixed(3);
        document.getElementById('networkDetail').textContent = results.networkDetail;
        document.getElementById('networkBar').style.width = `${Math.min((1000 / results.network) * 10, 100)}%`;
      }, 500);
      
      setTimeout(() => {
        document.getElementById('audioScore').textContent = results.audio.toLocaleString();
        document.getElementById('audioDetail').textContent = results.audioDetail;
        document.getElementById('audioBar').style.width = `${Math.min((results.audio / 30000) * 100, 100)}%`;
      }, 600);
      
      setTimeout(() => {
        document.getElementById('webglScore').textContent = results.webgl.toLocaleString();
        document.getElementById('webglDetail').textContent = results.webglDetail;
        document.getElementById('webglBar').style.width = `${Math.min((results.webgl / 100000) * 100, 100)}%`;
      }, 700);
      
      setTimeout(() => {
        document.getElementById('domScore').textContent = results.dom.toLocaleString();
        document.getElementById('domDetail').textContent = results.domDetail;
        document.getElementById('domBar').style.width = `${Math.min((results.dom / 30000) * 100, 100)}%`;
      }, 800);
      
      setTimeout(() => {
        document.getElementById('totalScore').textContent = Math.round(results.total).toLocaleString();
        
        let rating = '';
        if (results.total >= 800) rating = 'ğŸš€ EXCELLENT';
        else if (results.total >= 600) rating = 'â­ GREAT';
        else if (results.total >= 400) rating = 'âœ“ GOOD';
        else if (results.total >= 200) rating = 'â—‹ FAIR';
        else rating = 'â–³ NEEDS IMPROVEMENT';
        
        document.getElementById('totalRating').textContent = rating;
      }, 1000);
    }

    function resetBenchmark() {
      document.getElementById('resultsScreen').classList.add('hidden');
      document.getElementById('startScreen').classList.remove('hidden');
      document.getElementById('progressBar').style.width = '0%';
      
      Object.keys(results).forEach(key => {
        results[key] = 0;
      });
      
      document.getElementById('liveMetric1').textContent = '-';
      document.getElementById('liveMetric2').textContent = '-';
      document.getElementById('liveMetric3').textContent = '-';
      document.getElementById('liveMetric4').textContent = '-';
    }

    document.getElementById('startButton').addEventListener('click', runFullBenchmark);
    document.getElementById('retestButton').addEventListener('click', resetBenchmark);

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ['main_title', config.main_title || defaultConfig.main_title],
          ['subtitle', config.subtitle || defaultConfig.subtitle],
          ['button_text', config.button_text || defaultConfig.button_text]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c891d44721700b8',t:'MTc3MDE5NzA1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
